<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
	rel="stylesheet">
<title>Document</title>
<script type="text/javascript"
	src="https://gc.kis.v2.scr.kaspersky-labs.com/FD126C42-EBFA-4E12-B309-BB3FDD723AC1/main.js?attr=3A7qirMe_W3kHfkBucyOhFOIil_EVT7tIb7JTfpmlVpruQkVa5WEfK2wOPy8zCBaPvkpVV_ekKeCu-focZgTgNM3I7Q8b2QrhCZgX15a6hLHEIc1hMucx63FCBvp5fREc3o0eLVz52wTIDlnwwmh9g"
	charset="UTF-8"></script>
<style>
* {
	font-family: 'Poppins', sans-serif;
}

body {
	line-height: 2rem;
	;
}

/* NAVBAR */
nav {
	padding: 2px 3%;
	display: flex;
	align-items: center;
	justify-content: space-between;
	background-color: #c90c20;
}

nav .logo {
	width: 50px;
}

nav ul li {
	list-style: none;
	display: inline-block;
}

nav ul li a {
	text-decoration: none;
	color: #ffffff;
	font-size: 17px;
}

li a::after {
	content: '';
	width: 0;
	height: 3px;
	background-color: #ed1c24;
	margin: auto;
	display: block;
}

li a:hover::after {
	width: 100%;
	transition: width 0.3s linear;
}

/* TITOLO */
#titolo {
	display: flex;
	justify-content: center;
	background-color: #c90c1fda;
	color: #ffffff;
	padding: 0px !important;
}

.container-fluid {
	padding: 0 !important;
	margin: 0 !important;
}

/* NAV RIMANDO ALLA HOME E ALLO SHOP */
.rimando {
	margin-left: 20px;
	margin-top: 10px;
}

.rimando a {
	text-decoration: none;
	color: #c90c20;
}

.rimando a:hover {
	color: black;
}

/* BOTTONE AGGIUNGI AL CARELLO */
.st-button, .nd-button {
	background: #c90c20;
	padding: 10px 15px;
	color: white;
	font-weight: bolder;
	text-transform: uppercase;
	font-size: 18px;
	border-radius: 5px;
	box-shadow: 6px 6px 20px -4px rgba(0, 0, 0, 0.75);
	text-decoration: none;
	transition: 0.4s;
}

.st-button:hover, .nd-button:hover {
	background: white;
	color: #c90c20;
}

/* NAV SOTTO FOTO */
.nav-sotto a {
	color: #c90c20;
	margin-left: 100px;
	padding: 0;
}

.nav-sotto a:hover {
	color: black;
}

.carrello a {
	color: #ffffff;
}

.row-distanza {
	margin-top: 2rem;
}

.card-body-sub {
	display: flex;
	justify-content: space-between;
}

.dettaglio-btn {
	background: #ffffff;
	padding: 3px 6px;
	color: #ed1c24;
	font-weight: bolder;
	text-transform: uppercase;
	font-size: 18px;
	border-radius: 5px;
	box-shadow: 6px 6px 20px -4px rgba(0, 0, 0, 0.75);
	text-decoration: none;
	transition: 0.4s;
}

.dettaglio-btn:hover {
	background: #ed1c24;
	color: #ffffff;
}

.boh {
	display: flex;
	align-items: center;
	margin-right: 2rem;
}

.user-wrapper {
	display: flex;
	align-items: center;
	margin-right: 5rem;
}

.user-wrapper h4 {
	color: #000000;
	font-size: 1.1rem;
	margin-bottom: -5px;
}

.user-wrapper strong {
	color: #ffffff;
}

.carrello svg {
	margin-right: 3rem;
}

.carrello a {
	color: #ffffff;
}

body {
	background: #eee;
}

#side-nav {
	background: #c90c20;
	min-width: 300px;
	max-width: 300px;
}

.header-box {
	display: flex;
	justify-content: center;
}

.content {
	min-height: 100vh;
	width: 100%;
}

.sidebar li.active {
	background: #eee;
	border-radius: 8px;
}

.sidebar li.active a, .sidebar li.active a:hover {
	color: #000000;
}

.sidebar li a {
	color: #eee;
}

.content {
	display: flex;
	justify-content: center !important;
}

.filtri {
	color: #ffffff;
	margin: 0 2rem 0 2rem;
}

#customRange3 {
	color: #ffffff !important;
}

.min-maxx {
	display: flex;
	justify-content: space-between;
}

.navbar-text {
	margin-top: 3rem;
	color: #ffffff;
}

.filtro {
	display: flex;
	justify-content: center;
	margin-top: 5rem;
}

.filtri-btn {
	background: #ffffff;
	padding: 3px 6px;
	color: #ed1c24;
	font-weight: bolder;
	text-transform: uppercase;
	font-size: 18px;
	border-radius: 5px;
	box-shadow: 6px 6px 20px -4px rgba(0, 0, 0, 0.75);
	text-decoration: none;
	transition: 0.4s;
}

.filtri-btn:hover {
	background: #000000;
	color: #ffffff;
}

form {
	margin: 3rem 1rem 0 1rem;
}

form label {
	color: #ffffff;
}

input[type=range] {
	-webkit-appearance: none;
}

input[type=range]::-webkit-slider-runnable-track {
	width: 300px;
	height: 5px;
	background: #ffffff;
	border: none;
	border-radius: 3px;
}

input[type=range]::-webkit-slider-thumb {
	-webkit-appearance: none;
	border: none;
	height: 16px;
	width: 16px;
	border-radius: 50%;
	background: rgb(0, 0, 0);
	margin-top: -4px;
}

input[type=range]:focus {
	outline: none;
}

input[type=range]:focus::-webkit-slider-runnable-track {
	background: #ffffff;
}
</style>
</head>

<body>

	<!-- HEADER/NAVBAR -->
	<nav>
		<img src="image/SSC_Bari_logo.png" class="logo">
		<div class="user-wrapper">
			<div class="boh">
				<div th:if="${admin == null}" class="carrello">
					<!--link carrello-->
					 <a	th:href="@{utenteReserved}"><svg
							xmlns="http://www.w3.org/2000/svg" width="30" height="30"
							fill="currentColor" class="bi bi-cart3" viewBox="0 0 16 16">
                            <path
								d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .49.598l-1 5a.5.5 0 0 1-.465.401l-9.397.472L4.415 11H13a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l.84 4.479 9.144-.459L13.89 4H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z" />
                        </svg></a>
				</div>

				<!-- Dropdown con username o con 'Accedi' -->
				<div class="dropdown">
					<a href="#"
						class="d-flex align-items-center link-body-emphasis text-decoration-none dropdown-toggle"
						data-bs-toggle="dropdown" aria-expanded="false"
						style="color: white;"> <strong th:if="${admin}"
						th:text="${admin.username}"></strong> <strong th:if="${utente}"
						th:text="${utente.username}"></strong> <strong
						th:if="${admin == null && utente == null}">Accedi</strong>
					</a>
					<ul class="dropdown-menu text-small shadow">
						<!--sistemare spazio li>dropdown-->
						<li th:if="${admin != null}"><a class="dropdown-item"
							th:href="@{adminReserved}">Area personale</a></li>
						<!--link area riservata utente-->
						<li th:if="${admin == null}"><a class="dropdown-item"
							th:href="@{utenteReserved}">Area personale</a></li>
						<!--link area riservata utente-->
					</ul>
				</div>
			</div>
		</div>
	</nav>

	<div class="row"
		style="margin-right: 0px; margin-left: 0; padding: 0px;">
		<div class="col-md-12" style="padding-left: 0px; padding-right: 0px;">
			<h1 id="titolo" style="margin: 0;">S.C.C. BARI OFFICIAL SHOP</h1>
		</div>
	</div>

	<div class="main-container d-flex">
		<div class="sidebar" id="side-nav">

			<div class="sidebari-menu"></div>

			<form action="/shop" method="get">
				<ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
					<li class="nav-item mt-3">

						<div class="row">
							<div class="col-6">
								<label for="min-price" class="form-label">Prezzo min:</label><input
									type="range" class="form-range" id="min-price" name="min"
									min="0" max="500" step="10" value="0"
									oninput="changeMin(event)">
							</div>
							<div class="col-6">
								<label for="max-price" class="form-label">Prezzo max:</label><input
									type="range" class="form-range " id="max-price" name="max"
									min="0" max="500" step="10" value="500"
									oninput="changeMax(event)">
							</div>
						</div>
						<div class="row mt-4">
							<div class="col-6">

								<input type="text" class="form-control text-center"
									id="selected-min-price" readonly="readonly">
							</div>
							<div class="col-6">

								<input type="text" class="form-control text-center"
									id="selected-max-price" readonly="readonly">
							</div>
						</div>

					</li>
					<li class="nav-item">
						<div class="navbar-text">Categoria</div> <select name="categoria"
						class="form-select" aria-label="Default select example">
							<option hidden="true"></option>
							<option value="magliette">Magliette</option>
							<option value="felpe">Felpe</option>
							<option value="pantaloni">Pantaloni</option>
							<option value="accessori">Accessori</option>
					</select>
					</li>
				</ul>
				<div class="filtro">
					<input type="submit" class="filtri-btn" value="Applica filtri">
				</div>
			</form>

		</div>

		<!--INIZIO DIV CONTENT-->
		<div class="content">

			<div class="col-sm-8 col-md-10">

				<!-- RIMANDO ALLA HOME-->
				<div class="row" style="margin-right: 0px; margin-left: 0;">
					<div class="col-md-12">
						<ol class="breadcrumb rimando">
							<li class="breadcrumb-item"><a th:href="@{/}">Home</a></li>
							<li class="breadcrumb-item active" aria-current="page">Shop</li>
						</ol>
					</div>
				</div>

				<div class="container overflow-hidden text-center">
					<div class="row gy-5">
						<div class="col-4" th:each="p : ${catalogo}">
							<div class="p-3">

								<!--INIZIO CARD-->
								<div class="card" style="width: 20rem; height: 27rem;">
									<img th:if="${p.immagine == null}"
										src="image/SSC_Bari_logo.png" class="card-img-top"
										alt="Immagine del prodotto"> 
									<img
										th:if="${p.immagine != null}"
										th:src="@{${p.immagine}}" class="card-img-top"
										alt="Immagine del prodotto">
									<div class="card-body">
										<h4 th:text="${p.nome}"></h4>
										<div class="card-body-sub">
											<h4 th:text="${#numbers.formatDecimal(p.prezzo,0,'POINT',2,'COMMA')} + ' €'"></h4>
											<a th:href="@{dettaglio(id=${p.id})}" class="dettaglio-btn">Mostra</a>
										</div>
									</div>
								</div>
								<!--FINE CARD-->
							</div>
							<!--FINE P-3-->
						</div>
						<!--FINE COL-4-->
					</div>
					<!--FINE ROW GY-5-->
				</div>
				<!--FINE CONTAINER-->
			</div>
		</div>

		<script>
            // slider prezzo
            const minPriceSlider = document.getElementById('min-price');
            const maxPriceSlider = document.getElementById('max-price');
            const selectedMinPrice = document.getElementById('selected-min-price');
            const selectedMaxPrice = document.getElementById('selected-max-price');

            // imposta i valori iniziali dei campi di input
            selectedMinPrice.value = minPriceSlider.value + " €";
            selectedMaxPrice.value = maxPriceSlider.value + " €";

            // aggiorna i campi di input man mano che i dispositivi di scorrimento vengono spostati
            minPriceSlider.addEventListener('input', (event) => {
            selectedMinPrice.value = event.target.value + " €";
            if (parseInt(event.target.value) > parseInt(selectedMaxPrice.value)) {
                selectedMaxPrice.value = event.target.value + " €";
                maxPriceSlider.value = event.target.value;
            }
            });

            maxPriceSlider.addEventListener('input', (event) => {
            selectedMaxPrice.value = event.target.value + " €";
            if (parseInt(event.target.value) < parseInt(selectedMinPrice.value)) {
                selectedMinPrice.value = event.target.value + " €";
                minPriceSlider.value = event.target.value;
            }
            });

            // aggiorna i valori del campo di input quando cambiano i campi di input
            selectedMinPrice.addEventListener('input', (event) => {
            const minValue = parseInt(minPriceSlider.min);
            const maxValue = parseInt(maxPriceSlider.max);
            const value = Math.min(parseInt(event.target.value), parseInt(selectedMaxPrice.value));
            selectedMinPrice.value = value + " €";
            minPriceSlider.value = value;
            if (value > maxValue) {
                selectedMaxPrice.value = value + " €";
                maxPriceSlider.value = value;
            }
            });

            selectedMaxPrice.addEventListener('input', (event) => {
            const minValue = parseInt(minPriceSlider.min);
            const maxValue = parseInt(maxPriceSlider.max);
            const value = Math.max(parseInt(event.target.value), parseInt(selectedMinPrice.value));
            selectedMaxPrice.value = value + " €";
            maxPriceSlider.value = value;
            if (value < minValue) {
                selectedMinPrice.value = value + " €";
                minPriceSlider.value = value;
            }
            });
        </script>

		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>